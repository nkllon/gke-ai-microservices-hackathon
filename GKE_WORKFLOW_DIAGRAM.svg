<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #1a73e8; }
      .subtitle { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #5f6368; }
      .text { font-family: Arial, sans-serif; font-size: 14px; fill: #202124; }
      .small-text { font-family: Arial, sans-serif; font-size: 12px; fill: #5f6368; }
      .step { fill: #e8f0fe; stroke: #1a73e8; stroke-width: 2; rx: 8; }
      .decision { fill: #fef7e0; stroke: #f4b400; stroke-width: 2; rx: 8; }
      .agent { fill: #e6f4ea; stroke: #34a853; stroke-width: 2; rx: 8; }
      .storage { fill: #fce8e6; stroke: #ea4335; stroke-width: 2; rx: 8; }
      .arrow { stroke: #5f6368; stroke-width: 2; marker-end: url(#arrowhead); }
      .data-flow { stroke: #1a73e8; stroke-width: 3; stroke-dasharray: 5,5; }
      .success { stroke: #34a853; stroke-width: 3; }
      .failure { stroke: #ea4335; stroke-width: 3; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#5f6368" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" class="title">Intelligent Code Review Pipeline Workflow</text>
  <text x="600" y="65" text-anchor="middle" class="subtitle">Multi-Agent AI Analysis with Quality Gate Enforcement</text>

  <!-- Workflow Steps -->
  <!-- Step 1: Code Submission -->
  <rect x="50" y="100" width="150" height="60" class="step" />
  <text x="125" y="130" text-anchor="middle" class="text">1. Code Submission</text>
  <text x="125" y="145" text-anchor="middle" class="small-text">Developer uploads code</text>
  <text x="125" y="160" text-anchor="middle" class="small-text">via web interface</text>

  <!-- Step 2: Validation -->
  <rect x="250" y="100" width="150" height="60" class="step" />
  <text x="325" y="130" text-anchor="middle" class="text">2. Input Validation</text>
  <text x="325" y="145" text-anchor="middle" class="small-text">Sanitize & validate</text>
  <text x="325" y="160" text-anchor="middle" class="small-text">code submission</text>

  <!-- Step 3: Storage -->
  <rect x="450" y="100" width="150" height="60" class="storage" />
  <text x="525" y="130" text-anchor="middle" class="text">3. GKE Storage</text>
  <text x="525" y="145" text-anchor="middle" class="small-text">Upload to Cloud</text>
  <text x="525" y="160" text-anchor="middle" class="small-text">Storage bucket</text>

  <!-- Step 4: Orchestrator -->
  <rect x="650" y="100" width="150" height="60" class="step" />
  <text x="725" y="130" text-anchor="middle" class="text">4. Orchestrator</text>
  <text x="725" y="145" text-anchor="middle" class="small-text">Trigger multi-agent</text>
  <text x="725" y="160" text-anchor="middle" class="small-text">analysis workflow</text>

  <!-- Step 5: Parallel Agent Analysis -->
  <rect x="850" y="100" width="150" height="60" class="step" />
  <text x="925" y="130" text-anchor="middle" class="text">5. Parallel Analysis</text>
  <text x="925" y="145" text-anchor="middle" class="small-text">Deploy AI agents</text>
  <text x="925" y="160" text-anchor="middle" class="small-text">to GKE pods</text>

  <!-- AI Agent Services -->
  <rect x="100" y="220" width="180" height="80" class="agent" />
  <text x="190" y="250" text-anchor="middle" class="text">Security Agent</text>
  <text x="190" y="270" text-anchor="middle" class="small-text">Vulnerability scanning</text>
  <text x="190" y="285" text-anchor="middle" class="small-text">Security analysis</text>
  <text x="190" y="300" text-anchor="middle" class="small-text">Threat detection</text>

  <rect x="350" y="220" width="180" height="80" class="agent" />
  <text x="440" y="250" text-anchor="middle" class="text">Quality Agent</text>
  <text x="440" y="270" text-anchor="middle" class="small-text">Code style analysis</text>
  <text x="440" y="285" text-anchor="middle" class="small-text">Complexity assessment</text>
  <text x="440" y="300" text-anchor="middle" class="small-text">Maintainability metrics</text>

  <rect x="600" y="220" width="180" height="80" class="agent" />
  <text x="690" y="250" text-anchor="middle" class="text">Test Agent</text>
  <text x="690" y="270" text-anchor="middle" class="small-text">Test coverage analysis</text>
  <text x="690" y="285" text-anchor="middle" class="small-text">Pattern validation</text>
  <text x="690" y="300" text-anchor="middle" class="small-text">Quality assessment</text>

  <rect x="850" y="220" width="180" height="80" class="agent" />
  <text x="940" y="250" text-anchor="middle" class="text">Performance Agent</text>
  <text x="940" y="270" text-anchor="middle" class="small-text">Performance analysis</text>
  <text x="940" y="285" text-anchor="middle" class="small-text">Resource usage</text>
  <text x="940" y="300" text-anchor="middle" class="small-text">Optimization suggestions</text>

  <!-- Results Aggregation -->
  <rect x="350" y="350" width="180" height="60" class="step" />
  <text x="440" y="380" text-anchor="middle" class="text">6. Results Aggregation</text>
  <text x="440" y="395" text-anchor="middle" class="small-text">Collect & combine</text>
  <text x="440" y="410" text-anchor="middle" class="small-text">all agent outputs</text>

  <!-- Quality Gates Decision -->
  <rect x="600" y="350" width="180" height="60" class="decision" />
  <text x="690" y="380" text-anchor="middle" class="text">7. Quality Gates</text>
  <text x="690" y="395" text-anchor="middle" class="small-text">Evaluate against</text>
  <text x="690" y="410" text-anchor="middle" class="small-text">thresholds</text>

  <!-- Quality Gate Thresholds -->
  <rect x="100" y="470" width="200" height="80" class="storage" />
  <text x="200" y="500" text-anchor="middle" class="text">Quality Gate Thresholds</text>
  <text x="200" y="520" text-anchor="middle" class="small-text">Security: â‰¥80%</text>
  <text x="200" y="535" text-anchor="middle" class="small-text">Quality: â‰¥75%</text>
  <text x="200" y="550" text-anchor="middle" class="small-text">Tests: â‰¥70%</text>

  <!-- Success Path -->
  <rect x="400" y="470" width="180" height="60" class="step" />
  <text x="490" y="500" text-anchor="middle" class="text">8a. Gates Pass</text>
  <text x="490" y="515" text-anchor="middle" class="small-text">Deploy to production</text>
  <text x="490" y="530" text-anchor="middle" class="small-text">via GKE</text>

  <!-- Failure Path -->
  <rect x="650" y="470" width="180" height="60" class="step" />
  <text x="740" y="500" text-anchor="middle" class="text">8b. Gates Fail</text>
  <text x="740" y="515" text-anchor="middle" class="small-text">Generate detailed</text>
  <text x="740" y="530" text-anchor="middle" class="small-text">quality report</text>

  <!-- Final Steps -->
  <rect x="850" y="470" width="180" height="60" class="step" />
  <text x="940" y="500" text-anchor="middle" class="text">9. Results Dashboard</text>
  <text x="940" y="515" text-anchor="middle" class="small-text">Display findings</text>
  <text x="940" y="530" text-anchor="middle" class="small-text">to developer</text>

  <!-- Arrows - Main Flow -->
  <line x1="200" y1="160" x2="250" y2="160" class="arrow" />
  <line x1="400" y1="160" x2="450" y2="160" class="arrow" />
  <line x1="600" y1="160" x2="650" y2="160" class="arrow" />
  <line x1="800" y1="160" x2="850" y2="160" class="arrow" />

  <!-- Orchestrator to Agents -->
  <line x1="725" y1="160" x2="190" y2="220" class="arrow" />
  <line x1="725" y1="160" x2="440" y2="220" class="arrow" />
  <line x1="725" y1="160" x2="690" y2="220" class="arrow" />
  <line x1="725" y1="160" x2="940" y2="220" class="arrow" />

  <!-- Agents to Aggregation -->
  <line x1="190" y1="300" x2="440" y2="350" class="arrow" />
  <line x1="440" y1="300" x2="440" y2="350" class="arrow" />
  <line x1="690" y1="300" x2="440" y2="350" class="arrow" />
  <line x1="940" y1="300" x2="440" y2="350" class="arrow" />

  <!-- Aggregation to Quality Gates -->
  <line x1="530" y1="380" x2="600" y2="380" class="arrow" />

  <!-- Quality Gates to Thresholds -->
  <line x1="690" y1="350" x2="200" y2="470" class="arrow" />

  <!-- Quality Gates Decision Paths -->
  <line x1="690" y1="410" x2="490" y2="470" class="success" />
  <line x1="690" y1="410" x2="740" y2="470" class="failure" />

  <!-- Success Path -->
  <line x1="580" y1="500" x2="850" y2="500" class="success" />
  
  <!-- Failure Path -->
  <line x1="740" y1="530" x2="850" y2="530" class="failure" />

  <!-- Final Step -->
  <line x1="1030" y1="500" x2="940" y2="470" class="arrow" />

  <!-- GKE Scaling Indicators -->
  <text x="50" y="580" class="subtitle">GKE Auto-scaling Triggers:</text>
  <text x="50" y="600" class="text">ðŸš€ CPU â‰¥70% â†’ Scale up Security Agent pods</text>
  <text x="50" y="615" class="text">ðŸš€ Memory â‰¥80% â†’ Scale up Quality Agent pods</text>
  <text x="50" y="630" class="text">ðŸš€ Queue length â†’ Scale up Test Agent pods</text>
  <text x="50" y="645" class="text">ðŸš€ Custom metrics â†’ Scale based on AI workload</text>

  <!-- Performance Metrics -->
  <text x="400" y="580" class="subtitle">Performance Targets:</text>
  <text x="400" y="600" class="text">âš¡ Response time: &lt;500ms for analysis</text>
  <text x="400" y="615" class="text">ðŸ“Š Throughput: 1000+ requests/second</text>
  <text x="400" y="630" class="text">ðŸ”„ Availability: 99.9% uptime</text>
  <text x="400" y="645" class="text">ðŸ“ˆ Scalability: 3-10 pods per service</text>

  <!-- Business Value -->
  <text x="750" y="580" class="subtitle">Business Value:</text>
  <text x="750" y="600" class="text">ðŸ’¼ Automated code review process</text>
  <text x="750" y="615" class="text">ðŸ”’ Quality gate enforcement</text>
  <text x="750" y="630" class="text">ðŸ“ˆ Improved code quality</text>
  <text x="750" y="645" class="text">âš¡ Faster development cycles</text>
</svg>
